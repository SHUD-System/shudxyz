[["index.html", "全球水文模拟云平台 方法、应用与开发 前言", " 全球水文模拟云平台 方法、应用与开发 Lele Shu (shulele@lzb.ac.cn) 2023-05-29 前言 GHDC服务 全球水文数据云(Global Hydrologic Data Cloud, GHDC)，是一个快速获取水文建模基础数据，实现快速模型部署的云平台，可实现全球任意流域、任意大陆、任意国家范围快速水文模型部署。用户仅需提供欲建模的流域边界，GHDC即可自动化完成数据前处理，不仅生成建模所需要的基础数据（高程、土地利用、土壤质地、水系等），并能够制备SHUD(Simulator of Hydrologic Unstructured Domains)模型所需要的输入数据。用户可根据需要进行水文模拟、空间分析、数据挖掘等工作。 GHDC的工作流程 版权和权益 GHDC并不生成数据，仅提供提供数据处理服务。数据版权和权益全部归属于原始数据的作者们。当前平台处理的数据全部为开放版权(Public Domains)的数据产品——允许数据处理、修改和重发布，放弃数据版权权益。本平台不提供未使用开放版权的数据产品的数据处理。例如GLDAS, NLDAS和FLDAS数据都使用了开放版权，本平台可提供数据处理服务；但是部分再分析数据资料未使用开放版权，因此本平台无法提供数据处理服务。 若用户需要未开放版权的数据集的处理任务，请联系网站作者(shulele@lzb.ac.cn)商讨。 "],["overview.html", "Chapter 1 绪论", " Chapter 1 绪论 科学模型是集合人类对自然规律的认识，并通过已知变量(观察、测量、数据、信息等)计算时空上未知变量的数学方法。人们利用水文模型可以实现理解自然与预测自然的目的。数据和模型正是其中不可或缺的核心要素。 GHDC不仅能够增进水文建模的认知，增强现有开放数据的利用效率，同时也加快了水相关学科的交叉研究。 更重要的是，GHDC构建了一种标准化的建模范式，依照这个范式，不同的水文模型可以通过数据接口改造，在云平台上实现任意模型的快速部署。 本研究中，“开放”一词包含有三重含义： 开放的基础地理数据，通常是采用Public Domain或类似版权发布的数据； 建模过程的透明化； GHDC云平台数据与程序接口的开放和透明。 为了加快地理建模的速度，提高模型的可重复性和应用效率，研究者尝试过不同的策略，例如集成建模环境，开放数据获取，快速模型部署等。但是这诸多尝试仍存在某些不足之处。 任何人，只要它使用相同的流域边界和模型配置参数，就可以得到与我们一致的模型输入文件，并且通过相同版本的模拟，也可以得到相同的模拟结果。 对模型建模者而言，公开的数据固然不可或缺，但是更大的挑战是如何将这些开放的数据高效利用起来——从大规模数据集中提取所需要的研究区数据、从数据初步估算分布式模型参数、构建可以直接运行的模型输入数据、获得数据和模型的参考信息。上述的数据开放平台完成的特定数据的分享任务，但是对于快速水文建模而言，仍需要更深入的工作。 "],["method.html", "Chapter 2 方法论 2.1 关键地理数据 2.2 数据仓库", " Chapter 2 方法论 2.1 关键地理数据 2.2 数据仓库 2.2.1 原始数据源 当前可用数据见表： 数据分类 数据名称 数据属性 数据版权 数据源 高程 ASTER GDEM 全球 30m Public Domain 高程 Merit Hydro DEM 全球 90m Public Domain 土地利用 USGS Land Cover 全球 500m Public Domain 土壤质地 HWSD v1.0 全球 1km Public Domain 气象再分析资料 GLDAS 全球 0.25度，1950至今, 3hr Public Domain 气象再分析资料 FLDAS 全部部分区域 0.1度，1979至今, 3hr Public Domain 气象再分析资料 NLDAS 美国 0.125度，1979至今, 1hr Public Domain 气象再分析资料 CMFD 中国 0.1度, 3hr Public Domain 气象再分析资料 CLDAS 中国 0.125度 版权私有 "],["struct.html", "Chapter 3 设计结构", " Chapter 3 设计结构 "],["model.html", "Chapter 4 模型库 4.1 SHUD 4.2 TopModel", " Chapter 4 模型库 4.1 SHUD SHUD(Simulator for Hydrologic Unstructured Domains)是地表地下耦合的数值方法水文模型，是多尺度、多过程、高时间分辨率、灵活空间分辨率、地表-地下紧密耦合、有限体积法求解的分布式水文模型。 空间结构：非结构三角网格组成流域，三角形单元为最小计算单元，在垂直方向上分为地表、未饱和层以及饱和层；单元间差异性即反映水文参数的空间异质性。 时间步长：可变时间步长。模型自适应搜寻满足收敛条件的时间步长。内部迭代步长为1秒~10分钟。 SHUD具有物理过程清晰、时间分辨率高、空间表达更接近真实、数值求解效率高、模型适应性强、扩展性强等显著优势，并在世界多地的洪水预报、水资源评价、土地利用影响评价、湖泊生态、农业经济、以及学科交叉耦合等科研应用上得到验证。 模型已在北美、亚洲和非洲的23个流域得到应用，流域尺度覆盖0.08 \\(km2\\) 至70,000 \\(km2\\) 面积范围，空间分辨率从米至公里级；时间尺度上可实现天至百年长度的连续模拟。 SHUD模型的信息可从SHUD模型网站获取：https://www.shud.xyz/zh/ 4.2 TopModel "],["practice.html", "Chapter 5 练习 5.1 上传边界文件，设定模拟参数 5.2 查收邮件，点击确认链接 5.3 查收邮件，下载数据 5.4 编译模型，开始模型模拟 5.5 分析结果", " Chapter 5 练习 本节我们通过一个案例来展示，如何通过GHDC获取数据与建立水文模型。 这里的案例是使用四川彭州市的龙漕沟，是一个16 \\(km^2\\) 的小山沟。 5.1 上传边界文件，设定模拟参数 流域：龙漕沟，面积 16 \\(km^2\\). 四川成都，彭州市 年份：2017-2018 单元数：400个； \\(16\\times10^6 m^2/ 400 = 40,000 m^2 \\approx 200 m\\times 200 m\\) 气象驱动：CMFD （He et al., 2020），数据可用范围1979-2018 网页显示的流域边界 5.2 查收邮件，点击确认链接 接收到的邮件 点击确认邮件之后 5.3 查收邮件，下载数据 网页显示的流域边界 wget -cr https://shudfile.shuddata.com/download/20230528_admin@shuddata.com_log/ 建模的流域边界等 SHUD模型三角形网 SHUD模型单元的面积/分辨率分布 5.4 编译模型，开始模型模拟 进入到StaticFiles/SHUD_model文件夹，执行 chmod +x configure ./configure make clean make shud 拷贝编译好的shud可执行程序到模型输入数据的文件夹。 运行模型 ./shud lcg 5.5 分析结果 在StaticFiles/SHUD_model/rAnalysis中，使用RStudio打开rAnalysis.Rproj来分析数据。 #&#39; =================================================== #&#39; Analysis the output results from SHUD model #&#39; Author: Lele Shu &lt;shulele@lzb.ac.cn&gt; #&#39; Website: www.shud.xyz #&#39; Date: 2023-05-27 #&#39; Copyright: MIT-Licence #&#39; =================================================== #&#39; Function: #&#39; #&#39; rm(list=ls()) library(rSHUD) # 加载rSHUD包 library(xts) library(raster) library(rgdal) library(sp) library(ggplot2) prjname = &#39;lcg&#39; # 本项目名称 shud.env(prjname = prjname, inpath = file.path(&#39;../../../Modeling/input/&#39;, prjname), outpath = file.path(&#39;../../../Modeling/output/&#39;, paste0(prjname, &#39;.out&#39;))) AA = getArea() # 读取三角形单元面积 oid = getOutlets() # 读取河流出口的ID号 spr=sp.riv2shp() # 生成河流的shapefile qdown = readout(&#39;rivqdown&#39;) # 读取所有河流的向下径流 qs = ts2Daily(qdown[, oid[1]]) ts = time(qs) autoplot(qs[,]) # 绘制径流过程线图 gw=readout(&#39;eleygw&#39;) # 读取所有三角形单元的地下水变化时间序列 mgw = colMeans(gw) # 计算时间段内的地下水均值。 sp.mesh = sp.mesh2Shape(dbf = data.frame(&#39;gw&#39;=mgw)) # 生成三角形的shapefile。 plot_sp(sp.mesh, zcol = &#39;gw&#39;) plot(add=T, spr, col=&#39;red&#39;) [出口径流的过程线](Figure/practice/s5.1.png] [流域地下水储量的空间分布](Figure/practice/s5.2.png] "],["app.html", "Chapter 6 应用案例 6.1 结果", " Chapter 6 应用案例 我们使用三个流域作为案例来展示如何通过GHDC网站数据获取开放数据、快速模型部署、以及可靠重复的水文模拟流程。 三个流域分别是美国兰卡斯特流域、埃塞俄比亚GUMMARA流域和中国黑河上游。 我们以用户的角度提供欲模拟流域边界、数据需求、和建模参数，GHDC通过用户的需求进行数据处理、建模，然后用户利用其计算资源完成研究区的水文模拟工作。我们将在GHDC提供结果的基础上，使用SHUD模型开展水文模拟，并得到相应的径流、蒸散发和地下水等水文模拟结果。 三个实例的流域 黑河上游，中国 Gummara Watershed， 埃塞俄比亚 Conestoga Watershed，美国 6.1 结果 "],["faq.html", "Chapter 7 常见问题", " Chapter 7 常见问题 公众号二维码 使用微信扫描二维码添加管理员，可以加入微信群。 拉群微信 "],["dev.html", "Chapter 8 开发指南", " Chapter 8 开发指南 从Github可以获取SHUD，rSHUD和AutoSHUD的源代码: SHUD模型：https://github.com/SHUD-System/SHUD rSHUD： https://github.com/SHUD-System/rSHUD AutoSHUD：https://github.com/SHUD-System/AutoSHUD. 其他分布式水文模型在GHDC上部署时，可以参考一下流程图，替换掉ModelDeploy()函数的内容，就可以在GHDC针对新模型进行自动化建模。 这样，GHDC依然可以使用原有的数据处理程序，为用户提供基础地理数据，同时可以给用户提供更为灵活多样的建模选项。 dev "],["ref.html", "Chapter 9 参考文献", " Chapter 9 参考文献 For giving right credits to the platform developers, model developers and data creators, we suggest our users strongly to add following citations into your future work. SHUD: Shu, L., Ullrich, P. A., &amp; Duffy, C. J. (2020). Simulator for Hydrologic Unstructured Domains (SHUD v1.0): numerical modeling of watershed hydrology with the finite volume method. Geoscientific Model Development, 13(6), 2743–2762. https://doi.org/10.5194/gmd-13-2743-2020 Shu L.,Chang Y.,Wang J.,et al. A brief review of numerical distributed hydrological model SHUD［J］. Advances in Earth Science,2022,37（7）: 680-691. DOI: 10.11867/j.issn.1001-8166.2022.025. NLDAS Cosgrove, B. A. (2003). Real-time and retrospective forcing in the North American Land Data Assimilation System (NLDAS) project. Journal of Geophysical Research, 108(D22), 8842. https://doi.org/10.1029/2002JD003118 Landuse, USGS 0.5 km MODIS-based Global Land Cover Climatology Broxton, P.D., Zeng, X., Sulla-Menashe, D., Troch, P.A., 2014a: A Global Land Cover Climatology Using MODIS Data. J. Appl. Meteor. Climatol., 53, 1593-1605. doi: http://dx.doi.org/10.1175/JAMC-D-13-0270.1 "],["ack.html", "致谢", " 致谢 本平台的开发受到多个机构的研究经费支持。 中国科学院率先行动“BR计划”：数值方法水文模型 中国科学院寒旱区陆面过程与气候变化重点实验室：CLM-SHUD耦合模型研发 青海省防灾减灾重点实验室开放基金项目：布哈河流域径流变化及水循环机理研究 国家冰川冻土沙漠科学数据中心：水文模型自动化建模系统研发 美国能源部(DOE)： Model Integration through Knowledge-Rich Data and Process Composition 美国自然科学基金(NSE)：Knowledge-Guided Machine Learning: A Framework to Accelerate Scientific Discovery "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
