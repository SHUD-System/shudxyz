<!doctype html><!-- This site was created with Hugo Blox. https://hugoblox.com --><!-- Last Published: 2024年8月2日 --><html lang=zh-CN><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=generator content="Hugo Blox Builder 5.9.7"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload='this.media="all"'><script src=/js/mathjax-config.js></script><link rel=stylesheet href=/css/vendor-bundle.min.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.4/css/academicons.min.css integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin=anonymous media=print onload='this.media="all"'><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js integrity crossorigin=anonymous async></script><link rel=stylesheet href=/css/wowchemy.css><link rel=stylesheet href=/css/libs/chroma/github-light.min.css title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=/css/libs/chroma/dracula.min.css title=hl-dark media=print onload='this.media="all"' disabled><meta name=baidu-site-verification content="code-caLY3Fu6xB"><meta name=author content="舒乐乐"><meta name=description content="FAQ"><link rel=alternate hreflang=zh-CN href=http://localhost:1313/zh/books/shud/9-faq/><link rel=canonical href=http://localhost:1313/zh/books/shud/9-faq/><link rel=manifest href=/zh/manifest.webmanifest><link rel=icon type=image/png href=/media/icon_hu4b7ba8d7b72b8d90530142c1f3cd9f35_73534_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu4b7ba8d7b72b8d90530142c1f3cd9f35_73534_180x180_fill_lanczos_center_3.png><meta name=theme-color content="#3f51b5"><meta property="twitter:card" content="summary"><meta property="twitter:site" content="@leleshu"><meta property="twitter:creator" content="@leleshu"><meta property="twitter:image" content="http://localhost:1313/media/icon_hu4b7ba8d7b72b8d90530142c1f3cd9f35_73534_512x512_fill_lanczos_center_3.png"><meta property="og:type" content="website"><meta property="og:site_name" content="SHUD研究组"><meta property="og:url" content="http://localhost:1313/zh/books/shud/9-faq/"><meta property="og:title" content="FAQ | SHUD研究组"><meta property="og:description" content="FAQ"><meta property="og:image" content="http://localhost:1313/media/icon_hu4b7ba8d7b72b8d90530142c1f3cd9f35_73534_512x512_fill_lanczos_center_3.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2020-02-23T00:00:00+00:00"><link rel=alternate href=/zh/books/shud/9-faq/index.xml type=application/rss+xml title=SHUD研究组><title>FAQ | SHUD研究组</title>
<script async defer src=https://buttons.github.io/buttons.js></script></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=fb39f7741222ccfe7e2e6b8dd4183be5><script src=/js/wowchemy-init.min.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>搜索</h1></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=Close><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=搜索... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control aria-label=搜索...></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><div class="page-header header--fixed"><header><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/zh/>SHUD研究组</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label=切换导航>
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/zh/>SHUD研究组</a></div><div class="navbar-collapse main-menu-item collapse justify-content-center" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/zh/#home><span>首页</span></a></li><li class=nav-item><a class=nav-link href=/zh/project><span>项目</span></a></li><li class=nav-item><a class=nav-link href=/zh/team/><span>团队</span></a></li><li class=nav-item><a class=nav-link href=/zh/publication/><span>论文</span></a></li><li class=nav-item><a class=nav-link href=/zh/course/><span>书籍/课程</span></a></li><li class=nav-item><a class=nav-link href=/book_cn/><span>SHUD模型📚</span></a></li><li class=nav-item><a class=nav-link href=/openfunding/><span>开放基金⭐</span></a></li><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true><span>ExternalLink</span><span class=caret></span></a><div class=dropdown-menu><a class=dropdown-item href=https://ghdc.ac.cn><span>全球水文数据云🌏</span></a>
<a class=dropdown-item href=https://shudapp.netlify.app><span>SHUD图库🖼️</span></a></div></li><li class=nav-item><a class=nav-link href=/zh/opp/><span>加入我们</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=搜索><i class="fas fa-search" aria-hidden=true></i></a></li></ul></div></nav></header></div><div class=page-body><div class="container-fluid docs"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 docs-sidebar"><form class="docs-search d-flex align-items-center"><button class="btn docs-toggle d-md-none p-0 mr-md-3 w-100" type=button data-toggle=collapse data-target=#docs-nav aria-controls=docs-nav aria-expanded=false aria-label="Toggle section navigation"><div class=d-flex><span class="d-md-none pl-1 flex-grow-1 text-left overflow-hidden">1. SHUD
</span><span><i class="fas fa-chevron-down"></i></span></div></button>
<button class="form-control sidebar-search js-search d-none d-md-flex">
<i class="fas fa-search pr-2"></i>
<span class=sidebar-search-text>搜索...</span>
<span class=sidebar-search-shortcut>/</span></button></form><nav class="collapse docs-links" id=docs-nav><ul class="nav docs-sidenav"><li><a href=/zh/books/><i class="fas fa-arrow-left pr-1"></i>Books</a></li></ul><div class=docs-toc-item><a class=docs-toc-link href=/zh/books/shud/>1. SHUD</a><ul class="nav docs-sidenav"><div class=docs-toc-item><a class=docs-toc-link href=/zh/books/shud/2-rshud/>2. rSHUD分析工具</a></div><div class=docs-toc-item><a class=docs-toc-link href=/zh/books/shud/3-ghdc/>3. 全球水文数据云(GHDC)</a></div><div class=docs-toc-item><a class=docs-toc-link href=/zh/books/shud/resources/>4. 资源</a></div><div class=docs-toc-item><a class="docs-toc-link active" href=/zh/books/shud/9-faq/>5. 常见问题</a></div></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>在本页</a></li></ul><nav id=TableOfContents><ul><li><a href=#1-关于shud模型>1. 关于SHUD模型</a><ul><li><a href=#为什么使用非结构网格unstructured-mesh而不使用规则网格structured-grid>为什么使用非结构网格(unstructured mesh)，而不使用规则网格(structured grid)?</a></li><li><a href=#shud模型和pihm的区别>SHUD模型和PIHM的区别?</a></li><li><a href=#shud模型需要什么数据来驱动>SHUD模型需要什么数据来驱动？</a></li><li><a href=#shud模型在全球有哪些适用的流域>SHUD模型在全球有哪些适用的流域？</a></li></ul></li><li><a href=#2-模型安装与运行>2. 模型安装与运行</a><ul><li><a href=#那里下载shud模型源码>那里下载SHUD模型源码？</a></li><li><a href=#shud支持的操作系统平台有哪些>SHUD支持的操作系统平台有哪些？</a></li><li><a href=#如何安装sundialscvode>如何安装SUNDIALS/CVODE?</a></li><li><a href=#shud模型计算效率如何>SHUD模型计算效率如何？</a></li><li><a href=#如何开启shud并行模式>如何开启SHUD并行模式？</a></li><li><a href=#计算单元最优的面积大小或者最优计算单元的数量>计算单元最优的面积大小，或者最优计算单元的数量？</a></li></ul></li><li><a href=#3-rshud工具箱>3. rSHUD工具箱</a><ul><li><a href=#如何安装rshud>如何安装rSHUD?</a></li><li><a href=#rshud是否已经提交r-cran>rSHUD是否已经提交R CRAN?</a></li><li><a href=#rshud的源代码>rSHUD的源代码</a></li></ul></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role=main><div class=docs-article-container></div><div class=docs-article-container><h1>FAQ</h1><article class=article-style><h2 id=1-关于shud模型>1. 关于SHUD模型</h2><h3 id=为什么使用非结构网格unstructured-mesh而不使用规则网格structured-grid>为什么使用非结构网格(unstructured mesh)，而不使用规则网格(structured grid)?</h3><p>水文计算中非结构网格有以下几个优点：</p><ul><li>通常，非结构域中的计算单元数量远少于结构域。</li><li>由于自然环境中的变量和特征从来不是横平竖直的规则分布，因此非结构域比规则域更易于表达空间异质性特征，包括海拔、地形、土壤、图例利用等等。</li><li>非结构域的边界较为灵活，在不显著增加计算单元的情况下，可以详细描述计算域的边界形状。</li><li>非结构域的单元大小灵活，可根据模型和研究区域的特征在特定区域加密计算单元，而同时在外围地区保持较粗单元，即保证的计算域的边界影响最小，有能保证在所关心区域内的高精度高分辨率的模拟。</li><li>非结构网格更容易表达复杂边界。当研究区域边界复杂时，规则域的计算单元以指数级增长，实现对复杂边界和空间异质性的表达，而非结构域则无此限制。</li></ul><p>非结构域的缺点：</p><ul><li>比较难以建立</li><li>建立非结构域的算法多种多样，用户需要有较长的学习过程。</li><li>建立求解过程相比于规则域要复杂</li><li>空间数据的解读不如规则域简单直观，通常空间数据的可视化中——需要对非结构域结果进行空间插值，实现规则域形式的可视化。</li></ul><p>Reference: <a href=https://en.wikipedia.org/wiki/Grid_classification target=_blank rel=noopener>https://en.wikipedia.org/wiki/Grid_classification</a></p><h3 id=shud模型和pihm的区别>SHUD模型和PIHM的区别?</h3><p>SHUD模型是PIHM的继承者，采用了1996年Duffy提出的二相耦合概念模型并继承了PIHM 1.0和2.0的一些成熟经验。作者对模型的部分过程、计算和实现语言进行了修改。由于SHUD模型不再与PIHM模型兼容，因此使用新名称对其进行命名。</p><p>SHUD与PIHM的区别：</p><ol><li>SHUD使用C++面向对象编程，将计算封装，避免了PIHM常见的内存泄漏等问题。</li><li>SHUD使用了不同的坡面与河道的交互方式。PIHM中，河道与两个三角形坡面相邻，存在以下四个问题：(1) 河道的长度对计算单元数量极大影响，用户不得不在简单河道和计算单元数量之间做出取舍。(2) 平原地区的曲折河道导致大量微小三角形单元和非结构三角形，使得模型计算容易突破CFL条件，降低模型计算效率。(3) 容易形成局部积水点和拖慢整个流域的求解速度。(4) 为解决以上问题，模型用户需要反复手动对河流形状进行修改，降低了模型的可重复性和效率。在SHUD模型中，河道覆盖在三角形单元之上，坡面和河道之间的水量交换，计算河道水位和地下水、地表水的坡度，从而提高了整体计算效率。</li><li>SHUD模型中的公式计算入渗、地下水补给和河流交互不同于PIHM。采用的公式基于经验和模型设计需求。未来将进行模型对比，展示两个模型的差异。</li><li>SHUD模型确保了计算中的水量平衡。</li></ol><p>在技术层面SHUD模型：</p><ul><li>支持CVODE 5.0及以上版本。</li><li>支持OpenMP并行计算。</li><li>采用与PIHM不同的数据结构和算法。</li><li>支持输出可读性强的输入和输出文件。</li><li>实现统一的时间序列数据操作。</li><li>可指定步长输出模型状态，作为后续模型运行的初始条件。</li><li>实现自动检查模型的输入数据和参数的有效性。</li><li>增加模型调试选项，可监控每一步长内的非法值和内存操作。</li></ul><h3 id=shud模型需要什么数据来驱动>SHUD模型需要什么数据来驱动？</h3><ul><li><p>空间数据：高程、流域边界、河流、土壤分类、地质背景、土地利用、气象站点</p></li><li><p>属性数据： 土壤/地质特征、河道剖面几何特征、土地利用参数</p></li><li><p>时间序列数据：气象驱动（包括降雨，气温，湿度，风速和净辐射），叶面积指数，用于蒸发计算的粗糙度，融雪指数。</p><p>部分数据缺失的时候，可以使用SHUD模型的默认数据。具体请参考SHUD理论指南<a href=https://www.shud.xyz/Book_CN/ target=_blank rel=noopener>https://www.shud.xyz/Book_CN/</a>.</p></li></ul><h3 id=shud模型在全球有哪些适用的流域>SHUD模型在全球有哪些适用的流域？</h3><p>SHUD模型作为物理性水文模型，理论上可适用于任何流域和区域，而且SHUD模型非常灵活，可适应各种不同的背景和研究目的。</p><p>至今最小的模拟区域是Vauclin试验——模拟 $2m \times 3m \times 0.05 m $ ($ 高 \times 长 \times 宽 $)的水槽箱，顶部投影面结仅仅$ 0.1 m^2$，计算单元面积小于$ 0.1 cm^2$，本试验关注土壤水和地下水的计算精度。</p><p>最大应用案例为模拟萨克拉门托河流域40年水资源变化状况，面积700,000 $km^2$。使用 ~$7 km^2$面积的分辨率，每两小时完成一年模拟，计算时间步长小于10分钟。</p><p>部分应用案例可从链接 <a href=https://www.shud.xyz/book_cn/application.html target=_blank rel=noopener>https://www.shud.xyz/book_cn/application.html</a>查看.</p><h2 id=2-模型安装与运行>2. 模型安装与运行</h2><h3 id=那里下载shud模型源码>那里下载SHUD模型源码？</h3><p>SHUD模型源码可以从github（<a href=https://github.com/SHUD-System/SHUD target=_blank rel=noopener>https://github.com/SHUD-System/SHUD</a>），SHUD网站（<a href=https://www.shud.xyz target=_blank rel=noopener>shud.xyz</a>），以及作者处（<a href=mailto:shulele@lzb.ac.cn>shulele@lzb.ac.cn</a>）获取</p><h3 id=shud支持的操作系统平台有哪些>SHUD支持的操作系统平台有哪些？</h3><p>SHUD模型由C++书写，rSHUD使用了R，因此SHUD模拟环境可以在Windows, Linux, Mac OS, Unix等等各种操作系统平台上无缝迁移。在各种平台上都需要安装C/C++编译器， R运行环境来支持模型构建和运行。</p><h3 id=如何安装sundialscvode>如何安装SUNDIALS/CVODE?</h3><p>SUNDIALS (<a href=https://computing.llnl.gov/projects/sundials target=_blank rel=noopener>https://computing.llnl.gov/projects/sundials</a>) 是一个强大的数学库，能够高效求解工程物理和科学问题。CVODE是SUNDIALS套件中的一个求解器，用于求解初值问题的常微分方程。SHUD模型需要使用CVODE，因此用户需要编译和安装CVODE保证模型运行。关于SUNDIAL/CVODE安装过程，请参考：<a href=https://www.shud.xyz/book_cn/modeling.html target=_blank rel=noopener>https://www.shud.xyz/book_cn/modeling.html</a>。除了使用SUNDIALS/CVODE的安装器之外，还可以使用源码中的文件 <code>configure</code>来安装。</p><h3 id=shud模型计算效率如何>SHUD模型计算效率如何？</h3><p>理论上的计算效率与5个要素有关：</p><ol><li>空间单元分辨率和河流长度。计算单元和河道数量越多，计算所需时间越长。同时，当计算单元越小，隐式数值方法所需要的时间不长也越小，导致计算效率变低。因此，用户需要权衡模拟空间精度与模拟效率，选择合适的分辨率。</li><li>参数集；作为物理性数值方法模型，当不合理参数出现时，将会极大的影响计算空间中的变化速率，变化速率变大，会导致迭代的时间步长变小甚至出现异常数值。</li><li>流域地形特征；坡度较陡的地形也会使得计算的变化速率过快，导致计算效率变慢。通常这类情况出现在局部山区，通过调整格网位置或者局部加粗分辨率可以得到改善。</li><li>计算资源；并行计算通常要比单线程计算效率高，并且耗时更可预测。</li><li>降雨强度；当发生大暴雨时，整个计算空间中的地表水和河道水都快速变化，模型会自动缩小迭代时间不长——通常小于1分钟，会极大降低模拟效率，当暴雨结束、洪水退去之后，模型进入较为稳定状态，运行效率会恢复到较高水平。</li></ol><p>已有案例中，较为常见的模拟效率为：面积 192 $km^2$，划分1100个单元，约5小时可以完成17年模拟，约每小时3年； 更常见的情况时每小时实现半年模拟。</p><h3 id=如何开启shud并行模式>如何开启SHUD并行模式？</h3><p>首先，你需要安装OpenMP。然后测试<code>-fopen</code>编译选项是否可用。</p><p>然后，开启OpenMP的条件下重新编译CVODE，请参考：<a href=https://www.shud.xyz/book_cn/modeling.html target=_blank rel=noopener>https://www.shud.xyz/book_cn/modeling.html</a>。</p><p>最后，编译并行版的SHUD模型：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>make shud_omp
</span></span></code></pre></div><p>测试并行：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>./shud_omp ccw
</span></span></code></pre></div><h3 id=计算单元最优的面积大小或者最优计算单元的数量>计算单元最优的面积大小，或者最优计算单元的数量？</h3><p>此问题没有绝对答案。计算单元大小高度依赖研究的问题和研究区域特征。 分辨率可跨越$ \sim 1 cm^2$ 到 $ \sim 10 km^2$，根据研究的需求决定。</p><h2 id=3-rshud工具箱>3. rSHUD工具箱</h2><h3 id=如何安装rshud>如何安装rSHUD?</h3><p>首先你需要有R环境——先安装R，再推荐使用Rstudio。</p><p>在R中，首先需要安装devtools, 然后通过GitHub安装rSHUD。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>install</span><span class=o>.</span><span class=n>packages</span><span class=p>(</span><span class=s2>&#34;devtools&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>devtools</span><span class=p>::</span><span class=n>install_github</span><span class=p>(</span><span class=s2>&#34;SHUD-System/rSHUD&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=rshud是否已经提交r-cran>rSHUD是否已经提交R CRAN?</h3><p>尚未提交。 曾经试图提交，但是CRAN的管理员提出需要提交若干详细的案例和引用文献，费时费力，而且rSHUD的用户是模型使用者，应该可以驾驭几行简单的命令行——使用两行命令实现安装。但是未来我们还是会尽力向CRAN提交整个开发包。</p><h3 id=rshud的源代码>rSHUD的源代码</h3><p>源代码可以通过GitHub获取：<a href=https://github.com/SHUD-System/rSHUD target=_blank rel=noopener>https://github.com/SHUD-System/rSHUD</a>。但使用仅限非商业用途，商业用途请直接联系作者。</p></article><div class=article-widget><div class=post-nav></div></div></div><div class=body-footer><p>最近更新于 2月 23, 2020</p></div><footer class=site-footer><p class="powered-by copyright-license-text">© {2022} SHUD. 凡我公开的，皆不保留版权，亦不申索权益；但需要您合理引用。 (I reserve no right on anything in this website. Use it for free with right citation/reference. )</p><p class=powered-by>由<a href="https://hugoblox.com/?utm_campaign=poweredby" target=_blank rel=noopener>Hugo Blox Builder</a>支持发布——免费<a href=https://github.com/HugoBlox/hugo-blox-builder target=_blank rel=noopener>开源</a>网站，为创作者赋能。</p></footer></main></div></div></div><div class=page-footer></div><script src=/js/vendor-bundle.min.js></script><script src=https://cdn.jsdelivr.net/npm/anchor-js@5.0.0/anchor.min.js integrity="sha256-aQmOEF2ZD4NM/xt4hthzREIo/2PFkOX/g01WjxEV7Ys=" crossorigin=anonymous></script><script>anchors.add()</script><script id=search-hit-fuse-template type=text/x-template>
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script><script src=https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin=anonymous></script><script id=page-data type=application/json>{"use_headroom":false}</script><script src=/zh/js/wowchemy.min.js></script><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>引用</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i> 复制
</a><a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i> 下载</a><div id=modal-error></div></div></div></div></div><script src=/js/wowchemy-publication.js type=module></script></body></html>